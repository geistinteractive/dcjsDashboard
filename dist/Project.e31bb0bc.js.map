{"version":3,"sources":["index.js"],"names":["print_filter","filter","f","eval","length","top","Infinity","dimension","d","console","log","JSON","stringify","replace","typeCodes","Complaint","Scheduling","Solicitor","threeChartHeight","dayFormat","d3","timeFormat","numFormatLg","format","numFormat","monthName","monthFormat","remove_empty_bins","source_group","all","value","removeTypes_Empty","current","previous","setIntoYears","sourceGroup","window","loadData","json","reducePeriodAdd","i","Year","reducePeriodRemove","reducePeriodInitial","typeAdd","Dept","typeRemove","typeInitial","getUniqueDepts","index","self","indexOf","currentYr","Date","getFullYear","previousYr","currentColor","previousColor","data","parse","forEach","theDate","fieldData","CreationTimestamp","currDate","Type","Call_Log_Type","split","join","Call_Log_Department","Day","Month","getMonth","facts","crossfilter","depts","map","lengthDepts","allCallsDim","allCallsGroup","group","deptDim","deptGroup","reduceCount","deptByTypeDim","deptByTypeGroup","reduce","deptByPersonDim","CreatedBy","deptByPersonGroup","typeDim","typeGroup","createdByDim","createdByGroup","monthDim","monthGroup","chartAllCalls","dc","rowChart","overviewComposite","compositeChart","overviewCurrent","lineChart","overviewPrevious","chartCallsByType","chartCallsByPerson","pieChart","chartCallsByDept","chartDeptByTypeTwoYears","chartDeptByTypeCurrent","barChart","chartDeptByTypePrevious","chartDeptByPersonTwoYears","chartDeptByPersonCurrent","chartDeptByPersonPrevious","document","querySelector","clientWidth","sel_stack","state","moveCurrent","movePrevious","gap","centerBar","elasticX","ordinalColors","schemeOranges","on","chart","selectAll","style","title","key","layer","stack","schemeGreens","height","xAxisPadding","shareTitle","legend","x","y","autoItemWidth","itemHeight","itemWidth","horizontal","_rangeBandPadding","scaleBand","xUnits","units","ordinal","brushOn","elasticY","compose","renderLabel","colors","curve","curveMonotoneX","valueAccessor","renderHorizontalGridLines","renderVerticalGridLines","scaleOrdinal","obj","fixedBarHeight","innerRadius","slicesCap","schemePaired","legendText","name","text","a","v","utils","printSingleValue","endAngle","startAngle","Math","PI","schemeTableau10","monthNames","xAxis","tickFormat","m","yAxis","n","clipPadding","renderAll"],"mappings":"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","file":"Project.e31bb0bc.js","sourceRoot":"..","sourcesContent":["// import theData from \"./data.json\";\n\nfunction print_filter(filter) {\n  var f = eval(filter);\n  if (typeof f.length != \"undefined\") {\n  } else {\n  }\n  if (typeof f.top != \"undefined\") {\n    f = f.top(Infinity);\n  } else {\n  }\n  if (typeof f.dimension != \"undefined\") {\n    f = f\n      .dimension(function (d) {\n        return \"\";\n      })\n      .top(Infinity);\n  } else {\n  }\n  console.log(\n    filter +\n      \"(\" +\n      f.length +\n      \") = \" +\n      JSON.stringify(f)\n        .replace(\"[\", \"[\\n\\t\")\n        .replace(/}\\,/g, \"},\\n\\t\")\n        .replace(\"]\", \"\\n]\")\n  );\n}\n\nvar typeCodes = {\n  \"Approve Repair\": \"App Rep\",\n  \"Billing Question\": \"Bill Q\",\n  \"Call for Eric\": \"C Eric\",\n  \"Call for Harvey\": \"C Harvey\",\n  \"Cancel Repair \": \"Can Rep\",\n  \"Cancel Service\": \"Can Ser\",\n  Complaint: \"Comp\",\n  \"Compliment - KUDDOS\": \"Kudos\",\n  \"General Question\": \"Gen Q\",\n  \"Question - BBQ\": \"Q BBQ\",\n  \"Question - Chems\": \"Q Chems\",\n  \"Question - Orders\": \"Q Ords\",\n  \"Question - Pool Cleaner Repair\": \"Q Pool\",\n  \"Questions - Parts\": \"Q Part\",\n  \"Recent Repair Bad\": \"Rec Rep B\",\n  \"Request Quote\": \"Req Qte\",\n  \"Requires Action\": \"Req Act\",\n  \"Schedule Repair\": \"Scd Rep\",\n  \"Schedule Repair **RETAIL**\": \"Scd Ret\",\n  Scheduling: \"Scd\",\n  Solicitor: \"Sol\",\n  \"Urgent - Const Call\": \"!Const Call\",\n  \"Urgent - Sales Please Call\": \"!Sales Call\",\n};\n\nvar threeChartHeight = 400;\n\nvar dayFormat = d3.timeFormat(\"%d\");\nvar numFormatLg = d3.format(\"~s\");\nvar numFormat = d3.format(\",\");\nvar monthName = d3.timeFormat(\"%B\");\nvar monthFormat = d3.timeFormat(\"%m\");\nfunction remove_empty_bins(source_group) {\n  return {\n    all: function () {\n      return source_group.all().filter(function (d) {\n        return d.value != 0;\n      });\n    },\n  };\n}\n\nfunction removeTypes_Empty(source_group) {\n  return {\n    all: function () {\n      return source_group.all().filter(function (d) {\n        return d.value === { current: {}, previous: {} };\n      });\n    },\n  };\n}\nfunction setIntoYears(sourceGroup) {\n  return {\n    all: function () {\n      return sourceGroup.all().filter;\n    },\n  };\n}\n\nwindow.loadData = function (json) {\n  //Reduce functions\n  function reducePeriodAdd(i, d) {\n    // console.log(d.Year);\n    if (d.Year === 2020) {\n      ++i.current;\n    } else {\n      ++i.previous;\n    }\n    return i;\n  }\n  function reducePeriodRemove(i, d) {\n    if (d.Year === 2020) {\n      --i.current;\n    } else {\n      --i.previous;\n    }\n    return i;\n  }\n\n  function reducePeriodInitial(i, d) {\n    return {\n      current: 0,\n      previous: 0,\n    };\n  }\n  function typeAdd(i, d) {\n    if (d.Year === 2020) {\n      i.current[d.Dept] = ++i.current[d.Dept] || 1;\n    } else {\n      i.previous[d.Dept] = ++i.previous[d.Dept] || 1;\n    }\n\n    return i;\n  }\n\n  function typeRemove(i, d) {\n    if (d.Year === 2020) {\n      i.current[d.Dept] = --i.current[d.Dept] || 0;\n    } else {\n      i.previous[d.Dept] = --i.previous[d.Dept] || 0;\n    }\n\n    return i;\n  }\n  function typeInitial(i, d) {\n    return { current: {}, previous: {} };\n  }\n\n  function getUniqueDepts(value, index, self) {\n    return self.indexOf(value) === index;\n  }\n  //Set variables\n  var currentYr = new Date().getFullYear();\n  var previousYr = currentYr - 1;\n  var currentColor = \"orange\";\n  var previousColor = \"green\";\n  //Configure data\n  var data = JSON.parse(json);\n\n  data.forEach(function (d, i) {\n    var theDate = d.fieldData.CreationTimestamp;\n    var currDate = new Date(theDate);\n    // console.log(currDate);\n    d.Date = currDate;\n    d.Year = d.Date.getFullYear();\n    d.Type = typeCodes[d.fieldData.Call_Log_Type].split(\" \").join(\"\");\n    d.Dept = d.fieldData.Call_Log_Department;\n    d.Day = dayFormat(currDate);\n    d.Month = currDate.getMonth();\n  });\n\n  var facts = crossfilter(data);\n  //Get unique departments\n  var depts = data\n    .map(function (d) {\n      return d.fieldData.Call_Log_Department;\n    })\n    .filter(getUniqueDepts);\n  var lengthDepts = depts.length;\n\n  //DIMENSION ****************************************\n  //ALL CALLS\n  var allCallsDim = facts.dimension(function (d) {\n    return d.Year;\n  });\n  var allCallsGroup = allCallsDim.group();\n\n  //DEPTARTMENTS\n  var deptDim = facts.dimension(function (d) {\n    return d.Dept;\n  });\n  var deptGroup = deptDim.group().reduceCount();\n\n  //DEPT by TYPE\n  var deptByTypeDim = facts.dimension(function (d) {\n    return d.Type;\n  });\n  var deptByTypeGroup = deptByTypeDim\n    .group()\n    .reduce(typeAdd, typeRemove, typeInitial);\n\n  //DEPT by PERSON\n  var deptByPersonDim = facts.dimension(function (d) {\n    return d.fieldData.CreatedBy;\n  });\n  var deptByPersonGroup = deptByPersonDim\n    .group()\n    .reduce(typeAdd, typeRemove, typeInitial);\n  //TYPE DIMENSION\n  var typeDim = facts.dimension(function (d) {\n    return d.fieldData.Call_Log_Type;\n  });\n  var typeGroup = typeDim.group().reduceCount(function (d) {\n    return d.Call_Log_Type;\n  });\n\n  //PERSON DIMENSION\n  var createdByDim = facts.dimension(function (d) {\n    return d.fieldData.CreatedBy;\n  });\n  var createdByGroup = createdByDim.group();\n\n  var monthDim = facts.dimension(function (d) {\n    return d.Month;\n  });\n\n  var monthGroup = monthDim\n    .group()\n    .reduce(reducePeriodAdd, reducePeriodRemove, reducePeriodInitial);\n\n  // var yearPrev = yearCurrent - 1;\n\n  window.chartAllCalls = dc.rowChart(\"#allCalls\");\n\n  window.overviewComposite = dc.compositeChart(\"#overview\");\n  window.overviewCurrent = dc.lineChart(overviewComposite);\n  window.overviewPrevious = dc.lineChart(overviewComposite);\n  window.chartCallsByType = dc.rowChart(\"#chartCallsByType\");\n  window.chartCallsByPerson = dc.pieChart(\"#chartCallsByPerson\");\n  window.chartCallsByDept = dc.pieChart(\"#chartCallsByDepartment\");\n  window.chartDeptByTypeTwoYears = dc.compositeChart(\n    \"#chartDeptByTypeTwoYears\"\n  );\n  window.chartDeptByTypeCurrent = dc.barChart(chartDeptByTypeTwoYears);\n  window.chartDeptByTypePrevious = dc.barChart(chartDeptByTypeTwoYears);\n\n  window.chartDeptByPersonTwoYears = dc.compositeChart(\n    \"#chartDeptByPersonTwoYears\"\n  );\n  window.chartDeptByPersonCurrent = dc.barChart(chartDeptByPersonTwoYears);\n  window.chartDeptByPersonPrevious = dc.barChart(chartDeptByPersonTwoYears);\n  console.log(document.querySelector(\"#chartDeptByTypeTwoYears\").clientWidth);\n  function sel_stack(i, state) {\n    return function (d) {\n      return d.value[state][i] || 0;\n    };\n  }\n  var moveCurrent = 0;\n  var movePrevious = 20;\n  chartDeptByTypeCurrent\n    // .dimension(deptByTypeDim)\n    .gap(30)\n    .centerBar(true)\n    .elasticX(true)\n    .ordinalColors(d3.schemeOranges[7])\n    .on(\"pretransition\", function (chart) {\n      chart.selectAll(\"rect.bar\").style(\"width\", function (d) {\n        return \"30px\";\n      });\n    })\n    .title(function (d) {\n      return (\n        currentYr +\n        \" \" +\n        d.key +\n        \"[\" +\n        this.layer +\n        \"] \" +\n        d.value.current[this.layer]\n      );\n    })\n    .group(deptByTypeGroup, depts[0], sel_stack(depts[0], \"current\"));\n\n  for (var i = 1; i < lengthDepts; ++i) {\n    chartDeptByTypeCurrent.stack(\n      deptByTypeGroup,\n      \"\" + depts[i],\n      sel_stack(depts[i], \"current\")\n    );\n  }\n  chartDeptByTypePrevious\n    .title(function (d) {\n      return (\n        previousYr +\n        \" \" +\n        d.key +\n        \"[\" +\n        this.layer +\n        \"] \" +\n        d.value.previous[this.layer]\n      );\n    })\n    .centerBar(true)\n    .ordinalColors(d3.schemeGreens[7])\n    .elasticX(true)\n\n    .group(deptByTypeGroup, depts[0], sel_stack(depts[0], \"previous\"));\n  // .centerBar(true)\n\n  for (var i = 1; i < lengthDepts; ++i) {\n    chartDeptByTypePrevious.stack(\n      deptByTypeGroup,\n      \"\" + depts[i],\n      sel_stack(depts[i], \"previous\")\n    );\n  }\n  chartDeptByTypeTwoYears\n    .height(200)\n    .xAxisPadding(200)\n    .shareTitle(false)\n    .legend(\n      dc\n        .legend()\n        .x(1000)\n        .y(0)\n        .autoItemWidth(true)\n        .itemHeight(10)\n        .itemWidth(100)\n        .gap(5)\n        .horizontal(true)\n    )\n    ._rangeBandPadding(4)\n    .x(d3.scaleBand())\n    .xUnits(dc.units.ordinal)\n    .dimension(deptByTypeDim)\n    .group(deptByTypeGroup)\n    .brushOn(true)\n    .elasticY(true)\n\n    .xAxisPadding(true)\n    .brushOn(false)\n    .compose([chartDeptByTypePrevious, chartDeptByTypeCurrent]);\n\n  //Department by Person Composite\n  chartDeptByPersonCurrent\n    // .dimension(deptByPersonDim)\n    .gap(30)\n    .centerBar(true)\n    .renderLabel(false)\n    .ordinalColors(d3.schemeOranges[7])\n    .on(\"pretransition\", function (chart) {\n      chart.selectAll(\"rect.bar\").style(\"width\", function (d) {\n        return \"30px\";\n      });\n    })\n    .title(function (d) {\n      return (\n        currentYr +\n        \" \" +\n        d.key +\n        \"[\" +\n        this.layer +\n        \"] \" +\n        d.value.current[this.layer]\n      );\n    })\n    .group(deptByPersonGroup, depts[0], sel_stack(depts[0], \"current\"));\n  // .centerBar(true)\n\n  for (var i = 1; i < lengthDepts; ++i) {\n    chartDeptByPersonCurrent.stack(\n      deptByPersonGroup,\n      \"\" + depts[i],\n      sel_stack(depts[i], \"current\")\n    );\n  }\n\n  chartDeptByPersonPrevious\n\n    .ordinalColors(d3.schemeGreens[7])\n    .centerBar(true)\n\n    .title(function (d) {\n      return (\n        previousYr +\n        \" \" +\n        d.key +\n        \"[\" +\n        this.layer +\n        \"] \" +\n        d.value.previous[this.layer]\n      );\n    })\n    .group(deptByPersonGroup, depts[0], sel_stack(depts[0], \"previous\"));\n  // .centerBar(true)\n\n  for (var i = 1; i < lengthDepts; ++i) {\n    chartDeptByPersonPrevious.stack(\n      deptByPersonGroup,\n      \"\" + depts[i],\n      sel_stack(depts[i], \"previous\")\n    );\n  }\n  chartDeptByPersonTwoYears\n    .height(200)\n    .shareTitle(false)\n    .legend(\n      dc\n        .legend()\n        .x(1000)\n        .y(0)\n        .autoItemWidth(true)\n        .itemHeight(10)\n        .itemWidth(100)\n        .gap(5)\n        .horizontal(true)\n    )\n    ._rangeBandPadding(4)\n    .x(d3.scaleBand())\n    .xUnits(dc.units.ordinal)\n\n    .dimension(deptByPersonDim)\n    .group(deptByPersonGroup)\n    .brushOn(true)\n    .elasticY(true)\n\n    .xAxisPadding(true)\n    .brushOn(false)\n    .compose([chartDeptByPersonPrevious, chartDeptByPersonCurrent]);\n\n  overviewCurrent\n    .colors(currentColor)\n    .group(monthGroup, \"\" + currentYr)\n    .curve(d3.curveMonotoneX)\n    .renderLabel(false)\n    .valueAccessor(function (d) {\n      return d.value.current;\n    });\n\n  overviewPrevious\n    .colors(previousColor)\n    .curve(d3.curveMonotoneX)\n    .renderLabel(false)\n    .group(monthGroup, \"\" + previousYr)\n    .valueAccessor(function (d) {\n      return d.value.previous;\n    });\n\n  overviewComposite\n    .height(150)\n    .renderHorizontalGridLines(true)\n    .renderVerticalGridLines(true)\n    .x(d3.scaleOrdinal())\n    .xUnits(dc.units.ordinal)\n    // .legend(dc.legend().x(50).y(20).itemHeight(20).gap(5).horizontal(true))\n    .dimension(monthDim)\n    .group(monthGroup)\n    .elasticX(true)\n    .elasticY(true)\n    ._rangeBandPadding(1)\n    .brushOn(false)\n    .title(function (d) {\n      var obj =\n        currentYr +\n        \": \" +\n        d.value.current +\n        \"\\n\" +\n        previousYr +\n        \": \" +\n        d.value.previous;\n      return obj;\n    })\n    .compose([overviewCurrent, overviewPrevious]);\n\n  chartCallsByType\n    .dimension(typeDim)\n    .renderLabel(true)\n    .elasticX(true)\n    .group(typeGroup)\n    .height(threeChartHeight)\n    .x(d3.scaleOrdinal());\n\n  chartAllCalls\n    .dimension(allCallsDim)\n    .ordinalColors([previousColor, currentColor])\n    .legend(dc.legend().x(50).y(20).itemHeight(20).gap(5).horizontal(true))\n    .fixedBarHeight(25)\n    .renderLabel(true)\n    .elasticX(true)\n    .group(allCallsGroup)\n    .height(125)\n    .x(d3.scaleOrdinal());\n\n  chartCallsByPerson\n    .dimension(createdByDim)\n    .group(createdByGroup)\n    .innerRadius(50)\n    .height(200)\n    .slicesCap(5)\n    .ordinalColors(d3.schemePaired)\n    .legend(\n      dc.legend().legendText(function (d) {\n        // console.log(d);\n        return d.name + \" || \" + numFormat(d.data);\n      })\n    )\n    .title(function (d) {\n      return numFormat(d.value);\n    })\n    .on(\"pretransition\", function (chart) {\n      chart.selectAll(\"text.pie-slice\").text(function (d) {\n        var a = d.data.key;\n        var v = d.data.value;\n        // var label = a ? \"Canceled\" : \"Not Canceled\";\n        return dc.utils.printSingleValue(\n          d3.format(\".0%\")((d.endAngle - d.startAngle) / (2 * Math.PI))\n        );\n      });\n    });\n\n  chartCallsByDept\n    .dimension(deptDim)\n    .group(deptGroup)\n    .innerRadius(50)\n    .height(200)\n    .title(function (d) {\n      return numFormat(d.value);\n    })\n    .slicesCap(5)\n    .ordinalColors(d3.schemeTableau10)\n    .legend(\n      dc.legend().legendText(function (d) {\n        // console.log(d);\n        return d.name + \" || \" + numFormat(d.data);\n      })\n    )\n    .on(\"pretransition\", function (chart) {\n      chart.selectAll(\"text.pie-slice\").text(function (d) {\n        var a = d.data.key;\n        var v = d.data.value;\n        // var label = a ? \"Canceled\" : \"Not Canceled\";\n        return dc.utils.printSingleValue(\n          d3.format(\".0%\")((d.endAngle - d.startAngle) / (2 * Math.PI))\n        );\n      });\n    });\n  var monthNames = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  overviewComposite.xAxis().tickFormat(function (m) {\n    return monthNames[m];\n  });\n  chartDeptByPersonTwoYears.yAxis().tickFormat(function (n) {\n    return numFormatLg(n);\n  });\n  overviewComposite.yAxis().tickFormat(function (n) {\n    return numFormatLg(n);\n  });\n  chartDeptByTypeTwoYears.yAxis().tickFormat(function (n) {\n    return numFormatLg(n);\n  });\n  overviewComposite.clipPadding(100);\n  dc.renderAll();\n};\n\n// window.loadData(theData);\n"]}